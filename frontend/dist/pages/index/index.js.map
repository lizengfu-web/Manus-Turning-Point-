{"version":3,"file":"pages/index/index.js","mappings":";;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC/VA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://zhuanjiao-yizhan-miniprogram/._node_modules_@babel_runtime_helpers_esm_interopRequireWildcard.js","webpack://zhuanjiao-yizhan-miniprogram/./src/pages/index/index.tsx?acc1","webpack://zhuanjiao-yizhan-miniprogram/._src_pages_index_index.tsx"],"sourcesContent":["import _typeof from \"./typeof.js\";\nfunction _interopRequireWildcard(e, t) {\n  if (\"function\" == typeof WeakMap) var r = new WeakMap(),\n    n = new WeakMap();\n  return (_interopRequireWildcard = function _interopRequireWildcard(e, t) {\n    if (!t && e && e.__esModule) return e;\n    var o,\n      i,\n      f = {\n        __proto__: null,\n        \"default\": e\n      };\n    if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return f;\n    if (o = t ? n : r) {\n      if (o.has(e)) return o.get(e);\n      o.set(e, f);\n    }\n    for (var _t in e) \"default\" !== _t && {}.hasOwnProperty.call(e, _t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, _t)) && (i.get || i.set) ? o(f, _t, i) : f[_t] = e[_t]);\n    return f;\n  })(e, t);\n}\nexport { _interopRequireWildcard as default };","import _regenerator from \"E:/Manus-Turning-Point-/frontend/node_modules/@babel/runtime/helpers/esm/regenerator.js\";\nimport _interopRequireWildcard from \"E:/Manus-Turning-Point-/frontend/node_modules/@babel/runtime/helpers/esm/interopRequireWildcard.js\";\nimport _asyncToGenerator from \"E:/Manus-Turning-Point-/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _slicedToArray from \"E:/Manus-Turning-Point-/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport Taro from '@tarojs/taro';\nimport { View, Text, Image, Button } from '@tarojs/components';\nimport { useState, useEffect } from 'react';\nimport { useUserStore } from '@/store/user';\nimport { wxLogin, getCurrentUser, isLoggedIn } from '@/api/auth';\nimport './index.scss';\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function Index() {\n  var _useUserStore = useUserStore(),\n    user = _useUserStore.user,\n    setUser = _useUserStore.setUser;\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    quote = _useState2[0],\n    setQuote = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    loading = _useState4[0],\n    setLoading = _useState4[1];\n  var quotes = ['失业不是终点，而是转折点。每一个停顿，都是为了更好的起跑。', '你的价值不由工作定义。这个时期，是重新认识自己的机会。', '很多成功的人，都曾经历过失业。这不是失败，这是成长的代价。', '焦虑是正常的，但它不会改变现状。不如把精力投入到能改变的事情上。', '失业期间最珍贵的不是金钱，而是时间。好好利用它。'];\n  useEffect(function () {\n    // 随机选择一条寄语\n    var randomQuote = quotes[Math.floor(Math.random() * quotes.length)];\n    setQuote(randomQuote);\n\n    // 检查登录状态\n    if (isLoggedIn()) {\n      var currentUser = getCurrentUser();\n      setUser(currentUser);\n    }\n  }, []);\n\n  // 测试后端连接\n  var testConnection = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {\n      var _yield$import, API_BASE_URL, result, _t;\n      return _regenerator().w(function (_context) {\n        while (1) switch (_context.p = _context.n) {\n          case 0:\n            _context.p = 0;\n            setLoading(true);\n            _context.n = 1;\n            return Promise.resolve().then(function () {\n              return _interopRequireWildcard(require('@/api/config'));\n            });\n          case 1:\n            _yield$import = _context.v;\n            API_BASE_URL = _yield$import.API_BASE_URL;\n            console.log('正在测试连接:', API_BASE_URL);\n\n            // 先测试根路径\n            _context.n = 2;\n            return Taro.request({\n              url: \"\".concat(API_BASE_URL, \"/\"),\n              method: 'GET',\n              timeout: 5000\n            });\n          case 2:\n            result = _context.v;\n            console.log('连接测试成功:', result);\n            if (!(result.statusCode === 200)) {\n              _context.n = 3;\n              break;\n            }\n            Taro.showToast({\n              title: '连接成功！',\n              icon: 'success',\n              duration: 2000\n            });\n            _context.n = 4;\n            break;\n          case 3:\n            throw new Error(\"HTTP \".concat(result.statusCode));\n          case 4:\n            _context.n = 6;\n            break;\n          case 5:\n            _context.p = 5;\n            _t = _context.v;\n            console.error('连接测试失败:', _t);\n            Taro.showModal({\n              title: '连接失败',\n              content: \"\\u9519\\u8BEF\\u4FE1\\u606F: \".concat(_t.errMsg || _t.message || '未知错误', \"\\n\\n\\u8BF7\\u68C0\\u67E5:\\n1. \\u540E\\u7AEF\\u670D\\u52A1\\u5668\\u662F\\u5426\\u6B63\\u5728\\u8FD0\\u884C\\n2. API \\u5730\\u5740\\u914D\\u7F6E\\u662F\\u5426\\u6B63\\u786E\\n3. \\u624B\\u673A\\u548C\\u7535\\u8111\\u662F\\u5426\\u5728\\u540C\\u4E00 WiFi\"),\n              showCancel: false\n            });\n          case 6:\n            _context.p = 6;\n            setLoading(false);\n            return _context.f(6);\n          case 7:\n            return _context.a(2);\n        }\n      }, _callee, null, [[0, 5, 6, 7]]);\n    }));\n    return function testConnection() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  // 微信登录（使用新的授权方式）\n  var handleLogin = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2() {\n      var _yield$Taro$login, code, result, _t2;\n      return _regenerator().w(function (_context2) {\n        while (1) switch (_context2.p = _context2.n) {\n          case 0:\n            _context2.p = 0;\n            setLoading(true);\n\n            // 获取微信登录 code\n            _context2.n = 1;\n            return Taro.login();\n          case 1:\n            _yield$Taro$login = _context2.v;\n            code = _yield$Taro$login.code;\n            if (code) {\n              _context2.n = 2;\n              break;\n            }\n            throw new Error('获取登录凭证失败');\n          case 2:\n            _context2.n = 3;\n            return wxLogin({\n              code: code,\n              userInfo: {\n                nickName: '微信用户',\n                avatarUrl: 'https://mmbiz.qpic.cn/mmbiz/icTdbqWNOwNRna42FI242Lcia07jQodd2FJGIYQfG0LAJGFxM4FbnQP6yfMxBgJ0F3YRqJCJ1aPAK2dQagdusBZg/0'\n              }\n            });\n          case 3:\n            result = _context2.v;\n            setUser(result.user);\n            Taro.showToast({\n              title: '登录成功',\n              icon: 'success',\n              duration: 2000\n            });\n            _context2.n = 5;\n            break;\n          case 4:\n            _context2.p = 4;\n            _t2 = _context2.v;\n            console.error('登录失败:', _t2);\n            Taro.showToast({\n              title: _t2.message || '登录失败',\n              icon: 'none',\n              duration: 2000\n            });\n          case 5:\n            _context2.p = 5;\n            setLoading(false);\n            return _context2.f(5);\n          case 6:\n            return _context2.a(2);\n        }\n      }, _callee2, null, [[0, 4, 5, 6]]);\n    }));\n    return function handleLogin() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  // 跳转到指南页\n  var navigateToGuide = function navigateToGuide() {\n    Taro.navigateTo({\n      url: '/pages/webview/index?url=/guide'\n    });\n  };\n  return /*#__PURE__*/_jsxs(View, {\n    className: \"index-page\",\n    children: [/*#__PURE__*/_jsxs(View, {\n      className: \"header\",\n      children: [/*#__PURE__*/_jsx(Text, {\n        className: \"title\",\n        children: \"\\u8F6C\\u89D2\\u9A7F\\u7AD9\"\n      }), /*#__PURE__*/_jsx(Text, {\n        className: \"subtitle\",\n        children: \"\\u804C\\u573A\\u8F6C\\u6298\\u7684\\u6E29\\u6696\\u9A7F\\u7AD9\"\n      })]\n    }), user ? /*#__PURE__*/_jsx(View, {\n      className: \"user-card\",\n      children: /*#__PURE__*/_jsxs(View, {\n        className: \"user-info\",\n        children: [/*#__PURE__*/_jsx(Image, {\n          className: \"avatar\",\n          src: user.avatarUrl\n        }), /*#__PURE__*/_jsxs(View, {\n          className: \"info\",\n          children: [/*#__PURE__*/_jsx(Text, {\n            className: \"name\",\n            children: user.nickName\n          }), /*#__PURE__*/_jsx(Text, {\n            className: \"type\",\n            children: getUserTypeLabel(user.userType)\n          })]\n        })]\n      })\n    }) : /*#__PURE__*/_jsxs(View, {\n      className: \"login-card\",\n      children: [/*#__PURE__*/_jsx(Text, {\n        className: \"login-tip\",\n        children: \"\\u767B\\u5F55\\u540E\\u67E5\\u770B\\u4E2A\\u6027\\u5316\\u63A8\\u8350\"\n      }), /*#__PURE__*/_jsx(Button, {\n        className: \"test-btn\",\n        onClick: testConnection,\n        loading: loading,\n        disabled: loading,\n        style: {\n          marginBottom: '10px',\n          backgroundColor: '#10b981',\n          color: '#fff'\n        },\n        children: loading ? '测试中...' : '测试连接'\n      }), /*#__PURE__*/_jsx(Button, {\n        className: \"login-btn\",\n        onClick: handleLogin,\n        loading: loading,\n        disabled: loading,\n        children: loading ? '登录中...' : '微信登录'\n      })]\n    }), /*#__PURE__*/_jsxs(View, {\n      className: \"quote-card\",\n      children: [/*#__PURE__*/_jsx(View, {\n        className: \"quote-icon\",\n        children: \"\\uD83D\\uDCA1\"\n      }), /*#__PURE__*/_jsxs(View, {\n        className: \"quote-content\",\n        children: [/*#__PURE__*/_jsx(Text, {\n          className: \"quote-label\",\n          children: \"\\u4ECA\\u65E5\\u5BC4\\u8BED\"\n        }), /*#__PURE__*/_jsx(Text, {\n          className: \"quote-text\",\n          children: quote\n        })]\n      })]\n    }), /*#__PURE__*/_jsxs(View, {\n      className: \"feature-grid\",\n      children: [/*#__PURE__*/_jsxs(View, {\n        className: \"feature-item\",\n        onClick: navigateToGuide,\n        children: [/*#__PURE__*/_jsx(View, {\n          className: \"feature-icon\",\n          children: \"\\uD83D\\uDCD6\"\n        }), /*#__PURE__*/_jsx(Text, {\n          className: \"feature-title\",\n          children: \"\\u653F\\u7B56\\u6307\\u5357\"\n        }), /*#__PURE__*/_jsx(Text, {\n          className: \"feature-desc\",\n          children: \"\\u5931\\u4E1A\\u91D1\\u8BA1\\u7B97\\u3001\\u7533\\u9886\\u653B\\u7565\"\n        })]\n      }), /*#__PURE__*/_jsxs(View, {\n        className: \"feature-item\",\n        onClick: function onClick() {\n          return Taro.navigateTo({\n            url: '/pages/layoff/index'\n          });\n        },\n        children: [/*#__PURE__*/_jsx(View, {\n          className: \"feature-icon\",\n          children: \"\\u2696\\uFE0F\"\n        }), /*#__PURE__*/_jsx(Text, {\n          className: \"feature-title\",\n          children: \"\\u88C1\\u5458\\u54A8\\u8BE2\"\n        }), /*#__PURE__*/_jsx(Text, {\n          className: \"feature-desc\",\n          children: \"\\u6CD5\\u5F8B\\u6743\\u76CA\\u3001\\u8865\\u507F\\u8BA1\\u7B97\"\n        })]\n      }), /*#__PURE__*/_jsxs(View, {\n        className: \"feature-item\",\n        onClick: function onClick() {\n          return Taro.navigateTo({\n            url: '/pages/interview/index'\n          });\n        },\n        children: [/*#__PURE__*/_jsx(View, {\n          className: \"feature-icon\",\n          children: \"\\uD83C\\uDFA4\"\n        }), /*#__PURE__*/_jsx(Text, {\n          className: \"feature-title\",\n          children: \"\\u6A21\\u62DF\\u9762\\u8BD5\"\n        }), /*#__PURE__*/_jsx(Text, {\n          className: \"feature-desc\",\n          children: \"\\u9762\\u8BD5\\u8BAD\\u7EC3\\u3001\\u6280\\u80FD\\u63D0\\u5347\"\n        })]\n      }), /*#__PURE__*/_jsxs(View, {\n        className: \"feature-item\",\n        onClick: function onClick() {\n          return Taro.switchTab({\n            url: '/pages/opportunity/index'\n          });\n        },\n        children: [/*#__PURE__*/_jsx(View, {\n          className: \"feature-icon\",\n          children: \"\\uD83D\\uDCBC\"\n        }), /*#__PURE__*/_jsx(Text, {\n          className: \"feature-title\",\n          children: \"\\u526F\\u4E1A\\u673A\\u4F1A\"\n        }), /*#__PURE__*/_jsx(Text, {\n          className: \"feature-desc\",\n          children: \"\\u7075\\u6D3B\\u5C31\\u4E1A\\u3001\\u521B\\u4E1A\\u5B75\\u5316\"\n        })]\n      }), /*#__PURE__*/_jsxs(View, {\n        className: \"feature-item\",\n        onClick: function onClick() {\n          return Taro.switchTab({\n            url: '/pages/hole/index'\n          });\n        },\n        children: [/*#__PURE__*/_jsx(View, {\n          className: \"feature-icon\",\n          children: \"\\uD83D\\uDCAC\"\n        }), /*#__PURE__*/_jsx(Text, {\n          className: \"feature-title\",\n          children: \"\\u6811\\u6D1E\"\n        }), /*#__PURE__*/_jsx(Text, {\n          className: \"feature-desc\",\n          children: \"\\u503E\\u8BC9\\u5FC3\\u58F0\\u3001\\u4E92\\u76F8\\u9F13\\u52B1\"\n        })]\n      }), /*#__PURE__*/_jsxs(View, {\n        className: \"feature-item\",\n        onClick: function onClick() {\n          return Taro.switchTab({\n            url: '/pages/profile/index'\n          });\n        },\n        children: [/*#__PURE__*/_jsx(View, {\n          className: \"feature-icon\",\n          children: \"\\uD83D\\uDC64\"\n        }), /*#__PURE__*/_jsx(Text, {\n          className: \"feature-title\",\n          children: \"\\u6211\\u7684\"\n        }), /*#__PURE__*/_jsx(Text, {\n          className: \"feature-desc\",\n          children: \"\\u4E2A\\u4EBA\\u4E2D\\u5FC3\\u3001\\u8BBE\\u7F6E\"\n        })]\n      })]\n    })]\n  });\n}\nfunction getUserTypeLabel(userType) {\n  var labels = {\n    'short_term': '短期失业者',\n    'long_term': '长期失业者',\n    'recent_graduate': '应届毕业生',\n    'career_transition': '职业转型者'\n  };\n  return labels[userType] || '用户';\n}","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"!!../../../node_modules/@tarojs/taro-loader/lib/entry-cache.js?name=pages/index/index!./index.tsx\"\nvar config = {\"navigationBarTitleText\":\"转角驿站\"};\n\n\nvar inst = Page(createPageConfig(component, 'pages/index/index', {root:{cn:[]}}, config || {}))\n\n\nexport default component\n"],"names":[],"ignoreList":[],"sourceRoot":""}